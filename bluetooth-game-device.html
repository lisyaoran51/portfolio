<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth Music Game Device (2019) | Project</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="side-text">Project</div>

  <header class="site-header">
    <div class="container nav">
      <a href="index.html" class="brand">Josh Software.</a>
      <div class="nav-right">
        <nav class="menu">
          <a href="index.html">Top</a>
          <a href="about.html">About</a>
          <a href="#overview">Overview</a>
          <a href="#build">Architecture</a>
          <a href="#impact">Impact</a>
        </nav>
        <div class="lang-switch" aria-label="Language switcher">
          <a class="active" href="bluetooth-game-device.html">EN</a>
          <span class="divider">/</span>
          <a href="bluetooth-game-device-zh.html">中文</a>
        </div>
      </div>
    </div>
  </header>

  <main class="project-main">
    <section class="container project-hero" id="overview">
      <div>
        <p class="project-tag">Project 02</p>
        <h1 class="project-title">Bluetooth Music Game Device (2019)</h1>
        <p class="project-subtitle">
          I built a modular game framework for a Bluetooth music game device. Because the hardware had tight CPU and memory limits,
          the framework was designed to keep runtime overhead low while maintaining clear layering and maintainability.
          The stack is built with C++ and the BASS audio library.
        </p>
      </div>
      <img
        class="project-hero-image"
        src="game framework.jpg"
        alt="Bluetooth music game framework diagram"
      />
    </section>

    <section class="container project-content" id="build">
      <article class="project-block">
        <h2>Components</h2>
        <p>
          The lowest layer is Firmware/Library, including Display Driver, Keyboard Driver, Bluetooth (BLUEZ), and audio (BASS),
          which directly interact with hardware resources.
        </p>
        <p>
          On top of that, the Framework layer provides device abstraction and core services:
          IO Manager, Display Controller, Keyboard Controller, BLE Controller, and Audio Manager.
          Modules communicate through a Request/Message mechanism, with thread and timing control coordinating the runtime cycle.
        </p>
        <p>
          The upper layer is the Music Game domain, including Scene, UI, Script, and Game Event.
          A pluggable Ruleset layer sits above it so different gameplay rules can run on the same core architecture.
          This design keeps the system modular, extensible, and maintainable.
        </p>
        <img
          class="project-large-image"
          src="frame1.jpg"
          alt="System component architecture"
        />
      </article>

      <article class="project-block" id="impact">
        <h2>Hierarchy Structure</h2>
        <p>
          After the player selects a song, the Player loads the required mode and ruleset.
          A Time Controller manages timeline and rhythm synchronization, while Ruleset defines gameplay logic and scoring.
          Playfield handles rendering, and Event Master drives the game loop execution.
        </p>
        <p>
          A Dependency Cache provides shared resources such as settings, audio, and IO references,
          so modules can access common services without tight coupling.
          The result is a clear control flow and responsibility split that makes the gameplay pipeline easier to maintain and extend.
        </p>
        <img
          class="project-large-image"
          src="frame2.jpg"
          alt="Hierarchy and runtime flow diagram"
        />
      </article>

      <article class="project-block">
        <h2>Threads</h2>
        <p>
          To meet different update-rate requirements, the runtime is split into Update, Render, Input, and Audio threads.
          Each thread controls its own subsystem and avoids blocking the others.
        </p>
        <p>
          A frequency controller regulates each thread at its target rate, keeping interaction, rendering,
          and audio stable under constrained device performance.
        </p>
        <img
          class="project-large-image"
          src="frame3.jpg"
          alt="Thread design and timing control diagram"
        />
      </article>
    </section>
  </main>
</body>
</html>
